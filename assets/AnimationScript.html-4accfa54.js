import{_ as n,X as s,Y as a,a2 as p}from"./framework-8b8a807b.js";const t={},e=p(`<h1 id="ui编辑-动画脚本" tabindex="-1"><a class="header-anchor" href="#ui编辑-动画脚本" aria-hidden="true">#</a> UI编辑 - 动画脚本</h1><p>请确保你有一定的脚本基础，不需要特别了解，会使用游戏自带的api即可</p><p>在了解制作UI动画的方法后你也许会认为：使用触发器制作动画实在是太麻烦了</p><p>那么为什么不使用脚本制作动画呢？</p><p>提到脚本，你或许会认为根本学不懂，不会用。不过不用担心，在预设的脚本的基础上，使用脚本制作动画将会变得轻而易举！</p><p>在定义了动画函数之后，你只需要在脚本中输入几行极其简短的代码即可实现一些基本的动画效果</p><p>话不多说，进入正题（含API）</p><h2 id="基础动画" tabindex="-1"><a class="header-anchor" href="#基础动画" aria-hidden="true">#</a> 基础动画</h2><p>这里先普及一个函数：Trigger:wait(value)</p><p>该函数的具体作用就是等待时间，value填需要等待的时间，以秒为单位，但是精度只能达到0.05s</p><p>等待时间的原理：通过卡住线程实现暂停时间，即必须等待该函数运行完成后才能继续运行脚本（这里后面要考）</p><p>注意：该函数只能通过监听器调用才能实现功能，否则无法实现等待时间的效果</p><p>这是一个例子： （为了看起来更加简洁所以去除了注释）</p><div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code><span class="token keyword">function</span> <span class="token function">linear_animation</span><span class="token punctuation">(</span>player<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span>from_x<span class="token punctuation">,</span>from_y<span class="token punctuation">,</span>to_x<span class="token punctuation">,</span>to_y<span class="token punctuation">,</span>time<span class="token punctuation">)</span>
    <span class="token keyword">local</span> step_x <span class="token operator">=</span> <span class="token punctuation">(</span>to_x<span class="token operator">-</span>from_x<span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span>time<span class="token operator">/</span><span class="token number">0.05</span><span class="token punctuation">)</span>
    <span class="token keyword">local</span> step_y <span class="token operator">=</span> <span class="token punctuation">(</span>to_y<span class="token operator">-</span>from_y<span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span>time<span class="token operator">/</span><span class="token number">0.05</span><span class="token punctuation">)</span>
    <span class="token keyword">local</span> x <span class="token operator">=</span> from_x
    <span class="token keyword">local</span> y <span class="token operator">=</span> from_y
    <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>time<span class="token operator">/</span><span class="token number">0.05</span> <span class="token keyword">do</span>
        x <span class="token operator">=</span> x<span class="token operator">+</span>step_x
        y <span class="token operator">=</span> y<span class="token operator">+</span>step_y
        Customui<span class="token punctuation">:</span><span class="token function">setPosition</span><span class="token punctuation">(</span>playerid<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>
        Trigger<span class="token punctuation">:</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">0.05</span><span class="token punctuation">)</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span class="token comment">--调用示例</span>
<span class="token keyword">function</span> <span class="token function">play</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
    <span class="token function">linear_animation</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>eventobjid<span class="token punctuation">,</span><span class="token string">&quot;7082053565458168217&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;7082053565458168217_3&quot;</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">600</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>
ScriptSupportEvent<span class="token punctuation">:</span><span class="token function">registerEvent</span><span class="token punctuation">(</span><span class="token string">&quot;UI.Button.Click&quot;</span><span class="token punctuation">,</span>play<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>脚本效果：将元件由(200,200)平移至(600,200)</p><p>脚本看似复杂实则非常简单</p><p>脚本分为2个部分，定义函数部分和调用函数部分</p><p>函数部分即为初始化一个函数，让你能够很方便地调用，相当于脚本API接口里的API，该部分不需要特别了解，如果感兴趣的话可以研究研究</p><p>调用函数就相当于直接使用API，例如 Player:addItem(158087577,101,64) 即为玩家158087577添加64个土块</p><p><strong>接下来是脚本分析：</strong></p><p>定义一个名为”linear_animation”的函数,相当于整个脚本的核心，方便调用平移动画函数</p><div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code><span class="token keyword">function</span> <span class="token function">linear_animation</span><span class="token punctuation">(</span><span class="token punctuation">...</span><span class="token punctuation">)</span>
    <span class="token punctuation">...</span>
<span class="token keyword">end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>定义一个名为”play”的函数，函数内容为：将触发事件玩家的XX界面的XX元件的位置由(200,200)平移到(600,200)</p><div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code><span class="token keyword">function</span> <span class="token function">play</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
    <span class="token function">linear_animation</span><span class="token punctuation">(</span><span class="token punctuation">...</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注册监听器，监听玩家点击按钮，当玩家点击按钮时执行play函数</p><p>效果如下图所示：</p><p><img src="https://kfz-static.mini1.cn/college/dev_college_oa/1649331666819" alt="平移动画"></p><p>看不懂？没关系！会用就行了！（多看几个例子说不定就能掌握）</p><p>以下内容为4种基础动画脚本</p><h3 id="平移动画" tabindex="-1"><a class="header-anchor" href="#平移动画" aria-hidden="true">#</a> 平移动画</h3><div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code><span class="token comment">--[[
定义一个名为&quot;linear_animation&quot;的函数用于调用平移动画
playerid：播放动画的目标玩家
uiid：界面id
elementid：元件id
from_x：起点X坐标
from_y：起点Y坐标
to_x：终点X坐标
to_y：终点Y坐标
time：动画播放时间，以秒为单位，精度为0.05s
]]</span>
<span class="token keyword">function</span> <span class="token function">linear_animation</span><span class="token punctuation">(</span>player<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span>from_x<span class="token punctuation">,</span>from_y<span class="token punctuation">,</span>to_x<span class="token punctuation">,</span>to_y<span class="token punctuation">,</span>time<span class="token punctuation">)</span> <span class="token comment">--平移动画</span>
    <span class="token keyword">local</span> step_x <span class="token operator">=</span> <span class="token punctuation">(</span>to_x<span class="token operator">-</span>from_x<span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span>time<span class="token operator">/</span><span class="token number">0.05</span><span class="token punctuation">)</span> <span class="token comment">--设置步长，即单位时间内移动的距离</span>
    <span class="token keyword">local</span> step_y <span class="token operator">=</span> <span class="token punctuation">(</span>to_y<span class="token operator">-</span>from_y<span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span>time<span class="token operator">/</span><span class="token number">0.05</span><span class="token punctuation">)</span>
    <span class="token keyword">local</span> x <span class="token operator">=</span> from_x <span class="token comment">--设置初始坐标</span>
    <span class="token keyword">local</span> y <span class="token operator">=</span> from_y
    <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>time<span class="token operator">/</span><span class="token number">0.05</span> <span class="token keyword">do</span> <span class="token comment">--播放每一帧动画</span>
        x <span class="token operator">=</span> x<span class="token operator">+</span>step_x <span class="token comment">--设置下一帧坐标</span>
        y <span class="token operator">=</span> y<span class="token operator">+</span>step_y
        Customui<span class="token punctuation">:</span><span class="token function">setPosition</span><span class="token punctuation">(</span>playerid<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span> <span class="token comment">--修改元件坐标</span>
        Trigger<span class="token punctuation">:</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">0.05</span><span class="token punctuation">)</span> <span class="token comment">--等待0.05s后继续运行脚本</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span class="token comment">--调用示例</span>
<span class="token keyword">function</span> <span class="token function">play</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
    <span class="token comment">--调用&quot;linear_animation&quot;平移动画函数，由(200,200)移动到(800,200),播放2s</span>
    <span class="token function">linear_animation</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>eventobjid<span class="token punctuation">,</span><span class="token string">&quot;7082053565458168217&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;7082053565458168217_3&quot;</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">800</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>
ScriptSupportEvent<span class="token punctuation">:</span><span class="token function">registerEvent</span><span class="token punctuation">(</span><span class="token string">&quot;UI.Button.Click&quot;</span><span class="token punctuation">,</span>play<span class="token punctuation">)</span> <span class="token comment">--注册一个监听器，当按钮被点击时运行play函数</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://kfz-static.mini1.cn/college/dev_college_oa/1649331666819" alt="平移动画"></p><h3 id="旋转动画" tabindex="-1"><a class="header-anchor" href="#旋转动画" aria-hidden="true">#</a> 旋转动画</h3><div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code><span class="token comment">--[[
定义一个名为&quot;rotate_animation&quot;的函数用于调用旋转动画
playerid：播放动画的目标玩家
uiid：界面id
elementid：元件id
from_angle：起点角度坐标
to_angle：终点角度坐标
time：动画播放时间，以秒为单位，精度为0.05s
]]</span>
<span class="token keyword">function</span> <span class="token function">rotate_animation</span><span class="token punctuation">(</span>playerid<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span>from_angle<span class="token punctuation">,</span>to_angle<span class="token punctuation">,</span>time<span class="token punctuation">)</span> <span class="token comment">--旋转动画</span>
    <span class="token keyword">local</span> step_angle <span class="token operator">=</span> <span class="token punctuation">(</span>to_angle<span class="token operator">-</span>from_angle<span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span>time<span class="token operator">/</span><span class="token number">0.05</span><span class="token punctuation">)</span> <span class="token comment">--设置步长，即单位时间内旋转的角度</span>
    <span class="token keyword">local</span> angle <span class="token operator">=</span> from_angle <span class="token comment">--设置初始角度</span>
    <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>time<span class="token operator">/</span><span class="token number">0.05</span> <span class="token keyword">do</span> <span class="token comment">--播放每一帧动画</span>
        angle <span class="token operator">=</span> angle<span class="token operator">+</span>step_angle <span class="token comment">--设置下一帧角度</span>
        Customui<span class="token punctuation">:</span><span class="token function">rotateElement</span><span class="token punctuation">(</span>playerid<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span>angle<span class="token punctuation">)</span> <span class="token comment">--修改元件旋转角度</span>
        Trigger<span class="token punctuation">:</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">0.05</span><span class="token punctuation">)</span> <span class="token comment">--等待0.05s后继续运行脚本</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span class="token comment">--调用示例</span>
<span class="token keyword">function</span> <span class="token function">play</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
    <span class="token comment">--调用&quot;rotate_animation&quot;旋转动画函数，由0°旋转到360°，播放1s</span>
    <span class="token function">rotate_animation</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>eventobjid<span class="token punctuation">,</span><span class="token string">&quot;7082053565458168217&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;7082053565458168217_3&quot;</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">360</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>
ScriptSupportEvent<span class="token punctuation">:</span><span class="token function">registerEvent</span><span class="token punctuation">(</span><span class="token string">&quot;UI.Button.Click&quot;</span><span class="token punctuation">,</span>play<span class="token punctuation">)</span> <span class="token comment">--注册一个监听器，当按钮被点击时运行play函数</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://kfz-static.mini1.cn/college/dev_college_oa/1649331666831" alt="旋转动画"></p><h3 id="缩放动画" tabindex="-1"><a class="header-anchor" href="#缩放动画" aria-hidden="true">#</a> 缩放动画</h3><div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code><span class="token comment">--[[
定义一个名为&quot;size_animation&quot;的函数用于调用缩放动画
playerid：播放动画的目标玩家
uiid：界面id
elementid：元件id
from_width：起始宽度
from_height：起始高度
to_width：结束宽度
to_height：结束高度
time：动画播放时间，以秒为单位，精度为0.05s
]]</span>
<span class="token keyword">function</span> <span class="token function">size_animation</span><span class="token punctuation">(</span>player<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span>from_width<span class="token punctuation">,</span>from_height<span class="token punctuation">,</span>to_width<span class="token punctuation">,</span>to_height<span class="token punctuation">,</span>time<span class="token punctuation">)</span> <span class="token comment">--缩放动画</span>
    <span class="token keyword">local</span> step_width <span class="token operator">=</span> <span class="token punctuation">(</span>to_width<span class="token operator">-</span>from_width<span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span>time<span class="token operator">/</span><span class="token number">0.05</span><span class="token punctuation">)</span> <span class="token comment">--设置步长，即单位时间内缩放的宽高</span>
    <span class="token keyword">local</span> step_height <span class="token operator">=</span> <span class="token punctuation">(</span>to_height<span class="token operator">-</span>from_height<span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span>time<span class="token operator">/</span><span class="token number">0.05</span><span class="token punctuation">)</span>
    <span class="token keyword">local</span> width <span class="token operator">=</span> from_width <span class="token comment">--设置初始宽高</span>
    <span class="token keyword">local</span> height <span class="token operator">=</span> from_height
    <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>time<span class="token operator">/</span><span class="token number">0.05</span> <span class="token keyword">do</span> <span class="token comment">--播放每一帧动画</span>
        width <span class="token operator">=</span> width<span class="token operator">+</span>step_width <span class="token comment">--设置下一帧宽高</span>
        height <span class="token operator">=</span> height<span class="token operator">+</span>step_height
        Customui<span class="token punctuation">:</span><span class="token function">setSize</span><span class="token punctuation">(</span>playerid<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span>width<span class="token punctuation">,</span>height<span class="token punctuation">)</span> <span class="token comment">--修改元件宽高</span>
        Trigger<span class="token punctuation">:</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">0.05</span><span class="token punctuation">)</span> <span class="token comment">--等待0.05s后继续运行脚本</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span class="token comment">--调用示例</span>
<span class="token keyword">function</span> <span class="token function">play</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
    <span class="token comment">--调用2次&quot;size_animation&quot;缩放动画函数，第一次放大，第二次缩小，分别播放1s</span>
    <span class="token function">size_animation</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>eventobjid<span class="token punctuation">,</span><span class="token string">&quot;7082053565458168217&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;7082053565458168217_3&quot;</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token function">size_animation</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>eventobjid<span class="token punctuation">,</span><span class="token string">&quot;7082053565458168217&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;7082053565458168217_3&quot;</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>
ScriptSupportEvent<span class="token punctuation">:</span><span class="token function">registerEvent</span><span class="token punctuation">(</span><span class="token string">&quot;UI.Button.Click&quot;</span><span class="token punctuation">,</span>play<span class="token punctuation">)</span> <span class="token comment">--注册一个监听器，当按钮被点击时运行play函数</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://kfz-static.mini1.cn/college/dev_college_oa/1649331666821" alt="缩放动画"></p><h3 id="透明动画" tabindex="-1"><a class="header-anchor" href="#透明动画" aria-hidden="true">#</a> 透明动画</h3><div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code><span class="token comment">--[[
定义一个名为&quot;alpha_animation&quot;的函数用于调用透明动画
playerid：播放动画的目标玩家
uiid：界面id
elementid：元件id
from_alpha：起始透明度
to_alpha：结束透明度
time：动画播放时间，以秒为单位，精度为0.05s
]]</span>
<span class="token keyword">function</span> <span class="token function">alpha_animation</span><span class="token punctuation">(</span>player<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span>from_alpha<span class="token punctuation">,</span>to_alpha<span class="token punctuation">,</span>time<span class="token punctuation">)</span> <span class="token comment">--透明动画</span>
    <span class="token keyword">local</span> step_alpha <span class="token operator">=</span> <span class="token punctuation">(</span>to_alpha<span class="token operator">-</span>from_alpha<span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span>time<span class="token operator">/</span><span class="token number">0.05</span><span class="token punctuation">)</span> <span class="token comment">--设置步长，即单位时间内透明度改变量</span>
    <span class="token keyword">local</span> alpha <span class="token operator">=</span> from_alpha <span class="token comment">--设置初始透明度</span>
    <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>time<span class="token operator">/</span><span class="token number">0.05</span> <span class="token keyword">do</span> <span class="token comment">--播放每一帧动画</span>
        alpha <span class="token operator">=</span> alpha<span class="token operator">+</span>step_alpha <span class="token comment">--设置下一帧动画</span>
        Customui<span class="token punctuation">:</span><span class="token function">setAlpha</span><span class="token punctuation">(</span>playerid<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span>alpha<span class="token punctuation">)</span> <span class="token comment">--修改元件透明度</span>
        Trigger<span class="token punctuation">:</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">0.05</span><span class="token punctuation">)</span> <span class="token comment">--等待0.05s后继续运行脚本</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span class="token comment">--调用示例</span>
<span class="token keyword">function</span> <span class="token function">play</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
    <span class="token comment">--调用2次&quot;alpha_animation&quot;透明动画函数，第一次为逐渐消失，第二次为逐渐出现，分别播放1s</span>
    <span class="token function">alpha_animation</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>eventobjid<span class="token punctuation">,</span><span class="token string">&quot;7082053565458168217&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;7082053565458168217_3&quot;</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token function">alpha_animation</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>eventobjid<span class="token punctuation">,</span><span class="token string">&quot;7082053565458168217&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;7082053565458168217_3&quot;</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>
ScriptSupportEvent<span class="token punctuation">:</span><span class="token function">registerEvent</span><span class="token punctuation">(</span><span class="token string">&quot;UI.Button.Click&quot;</span><span class="token punctuation">,</span>play<span class="token punctuation">)</span> <span class="token comment">--注册一个监听器，当按钮被点击时运行play函数</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://kfz-static.mini1.cn/college/dev_college_oa/1649331666824" alt="透明动画"></p><h2 id="组合动画" tabindex="-1"><a class="header-anchor" href="#组合动画" aria-hidden="true">#</a> 组合动画</h2><p>ps：在组合动画讲解中将会省略定义动画函数以及注册监听器</p><p>只是简单的平移旋转的动画可能并不是特别美观，这时就需要用到组合动画</p><p>首先是一个很简单的例子，实现一个简单的组合动画</p><div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code><span class="token keyword">function</span> <span class="token function">play</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
  <span class="token keyword">local</span> playerid <span class="token operator">=</span> <span class="token number">158087577</span> <span class="token comment">--设置玩家</span>
  <span class="token keyword">local</span> uiid <span class="token operator">=</span> <span class="token string">&quot;7082053565458168217&quot;</span> <span class="token comment">--设置界面</span>
  <span class="token keyword">local</span> elementid <span class="token operator">=</span> <span class="token string">&quot;7082053565458168217_3&quot;</span> <span class="token comment">--设置元件</span>
  <span class="token function">linear_animation</span><span class="token punctuation">(</span>playerid<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">800</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">--平移动画</span>
  <span class="token function">rotate_animation</span><span class="token punctuation">(</span>playerid<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">360</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">--旋转动画</span>
  <span class="token function">size_animation</span><span class="token punctuation">(</span>playerid<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">--缩放动画</span>
  <span class="token function">alpha_animation</span><span class="token punctuation">(</span>playerid<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">--透明动画</span>
<span class="token keyword">end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>大致效果是：先平移，再旋转，再放大，最后淡出</p><p>效果如下图所示：</p><p><img src="https://s1.ax1x.com/2022/04/16/LJfxpR.gif" alt="简单的组合动画"></p><p>同一时间只有单个动画的组合动画并不能算真正意义上的组合动画，那么要怎么实现在同一时间播放多个动画呢？</p><p>这时就需要用到多线程函数threadpool:work()</p><p>在使用这个函数之前，首先你需要知道什么是线程以及多线程</p><p>举个例子，当你排队做核酸的时候，一条队伍就相当于一个线程，必须要等待前面的人做完核酸，后面的人才能坐，脚本也是如此</p><p>前面说到等待时间函数会卡住线程，导致后面的动画无法播放，要解决这个问题，就需要用到多线程，那么什么是多线程呢？</p><p>举个例子，排队做核酸的队伍有时并不是一条，而是多条，这样就可以实现同一时间多人一起做核酸，脚本也是如此</p><p>这里简单讲解一下多线程函数的用法</p><p>threadpool:work(没有参数的函数)</p><p>例子：</p><div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code><span class="token comment">--方法一</span>
<span class="token keyword">function</span> <span class="token function">play</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
    <span class="token keyword">local</span> playerid <span class="token operator">=</span> <span class="token number">158087577</span> <span class="token comment">--设置玩家</span>
    <span class="token keyword">local</span> uiid <span class="token operator">=</span> <span class="token string">&quot;7082053565458168217&quot;</span> <span class="token comment">--设置界面</span>
    <span class="token keyword">local</span> elementid <span class="token operator">=</span> <span class="token string">&quot;7082053565458168217_3&quot;</span> <span class="token comment">--设置元件</span>
    threadpool<span class="token punctuation">:</span><span class="token function">work</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">linear_animation</span><span class="token punctuation">(</span>playerid<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">800</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">end</span><span class="token punctuation">)</span> <span class="token comment">--为平移动画创建一个新的线程</span>
    <span class="token function">alpha_animation</span><span class="token punctuation">(</span>playerid<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token comment">--方法二</span>
<span class="token keyword">function</span> <span class="token function">play</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
    <span class="token keyword">local</span> playerid <span class="token operator">=</span> <span class="token number">158087577</span> <span class="token comment">--设置玩家</span>
    <span class="token keyword">local</span> uiid <span class="token operator">=</span> <span class="token string">&quot;7082053565458168217&quot;</span> <span class="token comment">--设置界面</span>
    <span class="token keyword">local</span> elementid <span class="token operator">=</span> <span class="token string">&quot;7082053565458168217_3&quot;</span> <span class="token comment">--设置元件</span>
    <span class="token keyword">function</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">linear_animation</span><span class="token punctuation">(</span>playerid<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">800</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">--平移动画</span>
    <span class="token keyword">end</span>
    threadpool<span class="token punctuation">:</span><span class="token function">work</span><span class="token punctuation">(</span>func1<span class="token punctuation">)</span> <span class="token comment">--为func1函数创建一个新的线程</span>
    <span class="token function">alpha_animation</span><span class="token punctuation">(</span>playerid<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>大致效果是：在平移的同时淡入</p><p>当然，你也可以选择直接将threadpool:work()内嵌到定义函数中</p><p>效果如下图所示：</p><p><img src="https://s1.ax1x.com/2022/04/16/LJhpX6.gif" alt="平移淡入动画"></p><p>那么结合以上内容，通过简单的叠加几个函数，即可实现以下动画：</p><div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code><span class="token keyword">function</span> <span class="token function">play</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
  <span class="token keyword">local</span> playerid <span class="token operator">=</span> <span class="token number">158087577</span> <span class="token comment">--设置玩家</span>
  <span class="token keyword">local</span> uiid <span class="token operator">=</span> <span class="token string">&quot;7082053565458168217&quot;</span> <span class="token comment">--设置界面</span>
  <span class="token keyword">local</span> elementid <span class="token operator">=</span> <span class="token string">&quot;7082053565458168217_3&quot;</span> <span class="token comment">--设置元件</span>
  <span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">--旋转动画</span>
    <span class="token function">rotate_animation</span><span class="token punctuation">(</span>playerid<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">360</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">--2s内顺时针旋转360°</span>
    <span class="token function">rotate_animation</span><span class="token punctuation">(</span>playerid<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span><span class="token number">360</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">--4s内逆时针旋转360°</span>
  <span class="token keyword">end</span>
  threadpool<span class="token punctuation">:</span><span class="token function">work</span><span class="token punctuation">(</span>func1<span class="token punctuation">)</span>
  threadpool<span class="token punctuation">:</span><span class="token function">work</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">alpha_animation</span><span class="token punctuation">(</span>playerid<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">end</span><span class="token punctuation">)</span> <span class="token comment">--淡入</span>
  threadpool<span class="token punctuation">:</span><span class="token function">work</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">size_animation</span><span class="token punctuation">(</span>playerid<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token keyword">end</span><span class="token punctuation">)</span> <span class="token comment">--6s内逐渐放大</span>
  <span class="token function">linear_animation</span><span class="token punctuation">(</span>playerid<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">--平移</span>
  <span class="token function">linear_animation</span><span class="token punctuation">(</span>playerid<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">600</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
  threadpool<span class="token punctuation">:</span><span class="token function">work</span><span class="token punctuation">(</span> <span class="token comment">--淡出</span>
      <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          Trigger<span class="token punctuation">:</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">--等待1s</span>
          <span class="token function">alpha_animation</span><span class="token punctuation">(</span>playerid<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">--淡出</span>
      <span class="token keyword">end</span><span class="token punctuation">)</span>
  <span class="token function">linear_animation</span><span class="token punctuation">(</span>playerid<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">600</span><span class="token punctuation">,</span><span class="token number">800</span><span class="token punctuation">,</span><span class="token number">600</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">--平移</span>
<span class="token keyword">end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>效果如下图所示：</p><p><img src="https://s1.ax1x.com/2022/04/16/LJhkAe.gif" alt="复杂组合动画"></p><h3 id="原地缩放动画" tabindex="-1"><a class="header-anchor" href="#原地缩放动画" aria-hidden="true">#</a> 原地缩放动画</h3><div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code><span class="token keyword">function</span> <span class="token function">play</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
    threadpool<span class="token punctuation">:</span><span class="token function">work</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">size_animation</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>eventobjid<span class="token punctuation">,</span><span class="token string">&quot;7082053565458168217&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;7082053565458168217_3&quot;</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">end</span><span class="token punctuation">)</span>
    <span class="token function">linear_animation</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>eventobjid<span class="token punctuation">,</span><span class="token string">&quot;7082053565458168217&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;7082053565458168217_3&quot;</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">250</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
    threadpool<span class="token punctuation">:</span><span class="token function">work</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">size_animation</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>eventobjid<span class="token punctuation">,</span><span class="token string">&quot;7082053565458168217&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;7082053565458168217_3&quot;</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">end</span><span class="token punctuation">)</span>
    <span class="token function">linear_animation</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>eventobjid<span class="token punctuation">,</span><span class="token string">&quot;7082053565458168217&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;7082053565458168217_3&quot;</span><span class="token punctuation">,</span><span class="token number">250</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://s1.ax1x.com/2022/04/16/LJhEhd.gif" alt="原地缩放动画"></p><h2 id="高级动画" tabindex="-1"><a class="header-anchor" href="#高级动画" aria-hidden="true">#</a> 高级动画</h2><p>高级动画需要用到比较复杂的计算过程，例如减速平移、翻转、函数图像轨迹等等（感兴趣可以仔细研究函数内容，如果只是单纯想用高级动画，直接看调用示例即可）</p><h3 id="减速平移动画" tabindex="-1"><a class="header-anchor" href="#减速平移动画" aria-hidden="true">#</a> 减速平移动画</h3><div class="language-lua line-numbers-mode" data-ext="lua"><pre class="language-lua"><code><span class="token comment">--[[
定义一个名为&quot;decelerate_animation&quot;的函数用于调用减速平移动画
playerid：播放动画的目标玩家
uiid：界面id
elementid：元件id
from_x：起点X坐标
from_y：起点Y坐标
to_x：终点X坐标
to_y：终点Y坐标
time：动画播放时间，以秒为单位，精度为0.05s
]]</span>
<span class="token keyword">function</span> <span class="token function">decelerate_animation</span><span class="token punctuation">(</span>player<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span>from_x<span class="token punctuation">,</span>from_y<span class="token punctuation">,</span>to_x<span class="token punctuation">,</span>to_y<span class="token punctuation">,</span>time<span class="token punctuation">)</span> <span class="token comment">--减速平移动画</span>
    <span class="token keyword">local</span> longth_x <span class="token operator">=</span> to_x<span class="token operator">-</span>from_x <span class="token comment">--设置位移</span>
    <span class="token keyword">local</span> longth_y <span class="token operator">=</span> to_y<span class="token operator">-</span>from_y
    <span class="token keyword">local</span> a_x <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">*</span>longth_x<span class="token operator">/</span><span class="token punctuation">(</span>time<span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">--设置加速度</span>
    <span class="token keyword">local</span> a_y <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">*</span>longth_y<span class="token operator">/</span><span class="token punctuation">(</span>time<span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">local</span> x <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">--初始化坐标表</span>
    <span class="token keyword">local</span> y <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>time<span class="token operator">/</span><span class="token number">0.05</span> <span class="token keyword">do</span> <span class="token comment">--将每一帧坐标储存在坐标表内</span>
        x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>to_x<span class="token operator">-</span><span class="token number">0.5</span><span class="token operator">*</span>a_x<span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">0.05</span><span class="token operator">*</span>i<span class="token punctuation">)</span><span class="token operator">^</span><span class="token number">2</span>
        y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>to_y<span class="token operator">-</span><span class="token number">0.5</span><span class="token operator">*</span>a_y<span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">0.05</span><span class="token operator">*</span>i<span class="token punctuation">)</span><span class="token operator">^</span><span class="token number">2</span>
    <span class="token keyword">end</span>
    <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>time<span class="token operator">/</span><span class="token number">0.05</span> <span class="token keyword">do</span> <span class="token comment">--播放每一帧动画</span>
        Customui<span class="token punctuation">:</span><span class="token function">setPosition</span><span class="token punctuation">(</span>playerid<span class="token punctuation">,</span>uiid<span class="token punctuation">,</span>elementid<span class="token punctuation">,</span>x<span class="token punctuation">[</span>time<span class="token operator">/</span><span class="token number">0.05</span><span class="token operator">-</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>y<span class="token punctuation">[</span>time<span class="token operator">/</span><span class="token number">0.05</span><span class="token operator">-</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">--修改元件坐标</span>
        Trigger<span class="token punctuation">:</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">0.05</span><span class="token punctuation">)</span>  <span class="token comment">--等待0.05s后继续运行脚本</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span class="token comment">--调用示例</span>
<span class="token keyword">function</span> <span class="token function">play</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
    <span class="token comment">--调用&quot;decelerate_animation&quot;减速平移动画函数，由(200,100)减速移动到(800,400),播放2s</span>
    <span class="token function">decelerate_animation</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>eventobjid<span class="token punctuation">,</span><span class="token string">&quot;7082053565458168217&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;7082053565458168217_3&quot;</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">800</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>
ScriptSupportEvent<span class="token punctuation">:</span><span class="token function">registerEvent</span><span class="token punctuation">(</span><span class="token string">&quot;UI.Button.Click&quot;</span><span class="token punctuation">,</span>play<span class="token punctuation">)</span> <span class="token comment">--注册一个监听器，当按钮被点击时运行play函数</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://s1.ax1x.com/2022/04/16/LJhAtH.gif" alt="减速平移动画"></p><p>ps：更多内容请等待下次更新！</p>`,76),o=[e];function c(l,i){return s(),a("div",null,o)}const k=n(t,[["render",c],["__file","AnimationScript.html.vue"]]);export{k as default};
